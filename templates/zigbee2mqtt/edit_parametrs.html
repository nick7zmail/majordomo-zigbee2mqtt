


<a href="https://www.zigbee2mqtt.io/devices/[#SELECTTYPE#]" target="_blank">
[#if MODELNAME#]

<!--   <a href="https://www.zigbee2mqtt.io/integration/home_assistant.html#[#MODELNAME#]" target="_blank">-->



<img src="../templates/zigbee2mqtt/img/[#MODELNAME#].jpg"   class="img-rounded" height="70" width="70" title="[#DESCRIPTION#]">


[#endif#]

[#MODELNAME#] ([#TITLE#])
</a>

&nbsp;


&nbsp;

   <a href="?view_mode=updatevalues&id=[#ID#]&tab=edit_parametrs"   class="btn btn-default" title="Get actual values" ><i class="glyphicon glyphicon-refresh"></i></a> 
&nbsp;

   <a href="?view_mode=getdevicegroup&id=[#ID#]&tab=edit_parametrs"   class="btn btn-default" title="Get deviece groups" ><i class="glyphicon glyphicon-user"></i></a> 
&nbsp;
   <a href="?view_mode=deletefromallgroup&id=[#ID#]&tab=edit_parametrs"   class="btn btn-default" title="Delete from all groups" ><i class="glyphicon glyphicon-floppy-remove"></i></a> 


<!-- results -->
[#if RESULT#]
<!-- paging -->
[#if PAGES#]
<center>
<ul class="pagination">
  [#begin PREVPAGE#]<li><a href="?view_mode=<#VIEW_MODE#>&mode=<#MODE#>&save_qry=1&page=[#NUM#]">&laquo;</a></li>[#end PREVPAGE#]
  [#begin PAGES#]
  <li [#if SELECTED#]class="active"[#endif#]><a href="?view_mode=<#VIEW_MODE#>&mode=<#MODE#>&save_qry=1&page=[#NUM#]">[#NUM#]</a></li>
 [#end PAGES#]
  [#begin NEXTPAGE#]<li><a href="?view_mode=<#VIEW_MODE#>&mode=<#MODE#>&save_qry=1&page=[#NUM#]">&raquo;</a></li>[#end NEXTPAGE#]
</ul>
</center>
[#endif PAGES#]
<!-- / paging -->
<!-- search results (list) -->
[#if TREE="1"#]
<ul>
 [#begin RESULT#]
 <li style="list-style-type: none">



[#type#]



 <span id="mqtt[#ID#]" class="mqtt_value">[#VALUE#]</span>

  [#if LINKED_OBJECT!=""#]
<i>
([#LINKED_OBJECT#].[#LINKED_PROPERTY#])</i>[#endif LINKED_OBJECT#]
  [#else#]<b>&bull;&nbsp;[#TITLE#]</b>[#endif#]
  [#if RESULT#]<ul>[#tree RESULT#]</ul>[#endif RESULT#]
 </li>
 [#end RESULT#]
</ul>
[#else TREE#]
<table   class="table table-stripped">
<thead>
<tr>
 <th>
 <a href="?sortby_mqtt=TITLE&save_qry=1"><#LANG_TITLE#></a><nobr>
 [#if SORTBY="TITLE"#](+)[#endif#]
 [#if SORTBY="TITLE DESC"#](-)[#endif#]</nobr>
 </th>
 <th>
 <#LANG_VALUE#>
 </th>

 <th>
 <#LANG_UPDATED#>

 </th>

 <th>
 <#LANG_VALUE#>
 </th>
<th>&nbsp;</th>
</tr>
</thead>
<tbody>
[#begin RESULT#]
<tr>
 <td>
  <b>
<!--
[#DEV_ID#]:
[#zmID#]:
-->

[#if !type=""#][#type#] :&nbsp
[#endif#]
[#if !value_template=""#]
[#value_template#]  [#if !payload_on=""#]([#payload_on#],[#payload_off#]) [#endif#]

[#else#]
</b>

[#METRIKA#]


[#endif#]


<br>
<small><small></b>
[#if !command_topic=""#]command_topic:    &nbsp&nbsp&nbsp [#command_topic#] <br>[#endif#]

[#if !command_value=""#]command_value:    &nbsp&nbsp&nbsp [#command_value#] <br>[#endif#]



[#if !state_topic=""#]state_topic:    &nbsp&nbsp&nbsp [#state_topic#]/[#METRIKA#] [#endif#]
</small></small>

 </td>
<!--
 <td >
  <span id="mqtt[#ID#]" class="mqtt_value">[#VALUE#]</span>
  [#if LINKED_OBJECT!=""#]([#LINKED_OBJECT#].[#LINKED_PROPERTY#])[#endif LINKED_OBJECT#]
 </td> 
-->


<td>

[#if !command_topic=""#]

       <div id="prop[#ID#]_current" onClick="$('#prop[#ID#]_current').hide();$('#prop[#ID#]_edit').show();">

    <pre>[#VALUE#]  [#if LINKED_OBJECT!=""#]([#LINKED_OBJECT#].[#LINKED_PROPERTY#])[#endif LINKED_OBJECT#]</pre>
   </div>

   <div id="prop[#ID#]_edit" style="display:none">
 <form action="?" method="post">
 <textarea name="value2" rows=2 cols="50" class="span5">[#VALUE#]</textarea>
 <br/>
 <input type="submit" name="submit" value="<#LANG_UPDATE#>" class="btn btn-primary">
 <a href="#" class="btn btn-default" onclick="$('#prop[#ID#]_edit').hide();$('#prop[#ID#]_current').show();return false;"><#LANG_CANCEL#></a>
 <input type="hidden" name="view_mode" value="update_prop">
 <input type="hidden" name="id" value="<#ID#>">
 <input type="hidden" name="prop" value="[#METRIKA#]">
 <input type="hidden" name="prop_id" value="[#zmID#]">
 <input type="hidden" name="tab" value="edit_parametrs">
 <input type="hidden" name="mode" value="update">
 </form>

   </div>

	
[#else#]
  <span id="mqtt[#ID#]" class="mqtt_value">[#VALUE#]</span>
  [#if LINKED_OBJECT!=""#](
<a href="/panel/linkedobject.html?op=redirect&object=[#LINKED_OBJECT#]&sub=properties" target="_blank">

[#LINKED_OBJECT#].[#LINKED_PROPERTY#]</a>
)[#endif LINKED_OBJECT#]
[#endif#]


</td>

<td>
  [#if UPDATED!=""#]
   [#UPDATED#]
  [#else#]
   &nbsp;
  [#endif#]
 </td>
 <td width="1%" nowrap>
  
  [#if "<#ACTION#>"=="admin"#]
   <a href="?view_mode=edit_mqtt&id=[#zmID#]" class="btn btn-default btn-sm" title="<#LANG_EDIT#>"><i class="glyphicon glyphicon-pencil"></i></a>
    <a href="?view_mode=delete_mqtt&id=[#zmID#]&redirectid=<#ID#>" onClick="return confirm('<#ARE_YOU_SURE#>')" class="btn btn-default btn-sm" title="<#LANG_DELETE#>"><i class="glyphicon glyphicon-remove"></i></a>
  [#endif ACTION#]
  
 </td>
</tr>
[#end RESULT#]
</tbody>
</table>
[#endif TREE#]
<!-- / search results (list) -->
<!-- paging -->
[#if PAGES#]
<center>
<ul class="pagination">
  [#begin PREVPAGE#]<li><a href="?view_mode=<#VIEW_MODE#>&mode=<#MODE#>&save_qry=1&page=[#NUM#]">&laquo;</a></li>[#end PREVPAGE#]
  [#begin PAGES#]
  <li [#if SELECTED#]class="active"[#endif#]><a href="?view_mode=<#VIEW_MODE#>&mode=<#MODE#>&save_qry=1&page=[#NUM#]">[#NUM#]</a></li>
 [#end PAGES#]
  [#begin NEXTPAGE#]<li><a href="?view_mode=<#VIEW_MODE#>&mode=<#MODE#>&save_qry=1&page=[#NUM#]">&raquo;</a></li>[#end NEXTPAGE#]
</ul>
</center>
[#endif PAGES#]
<!-- / paging -->
[#else RESULT#]
<p>
<div class="alert alert-danger"><#LANG_NO_RECORDS_FOUND#></div>
</p>
[#endif RESULT#]






<!-- / results -->
<script type="text/javascript">
 var valuesUpdateTimeout=0;
 function getLatestValues() {
  clearTimeout(valuesUpdateTimeout);
  var ids='';
  $('.mqtt_value').each(function () {
   ids+='ids[]='+this.id.replace('mqtt','')+'&';
  });
  var url='/ajax/mqtt.html?op=getvalues&'+ids;
  $.ajax({
   url: url
  }).done(function(data) {
   var obj=jQuery.parseJSON(data);
   if (obj.DATA.length>0) {
    for(var i=0;i<obj.DATA.length;i++) {
     var item_id=obj.DATA[i].ID;
     var value = obj.DATA[i].VALUE;
     var oldValue=$('#mqtt'+item_id).html();
     $('#mqtt'+item_id).html(value);
     if (value!=oldValue) {
      $("#mqtt"+item_id).fadeTo(100, 0.1).fadeTo(200, 1.0);
     }
    }
   }
   valuesUpdateTimeout = setTimeout('getLatestValues()',2000);
  });
 }
 valuesUpdateTimeout = setTimeout('getLatestValues()',2000);
</script>

 <a href="?" class="btn btn-default"><#LANG_CANCEL#></a>
